<?php $__env->startSection('breadcrumbs'); ?><?php echo Helper::breadcrumbs('Account Management', 'Add EMD User'); ?><?php $__env->stopSection(); ?><?php $__env->startSection('left_side'); ?> <?php echo Helper::left_side('Account Management', 'Add EMD User'); ?><?php $__env->stopSection(); ?><?php $__env->startSection('content'); ?><div class="row">    <div id="widget-grid" class="">        <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">            <div class="jarviswidget jarviswidget-color-darken" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false">                <header>                    <span class="widget-icon"> <i class="fa fa-edit"></i>                    </span>                    <h2>Add Account</h2>                </header>                <div>                    <div class="widget-body no-padding">                        <form id="account_info_form" class="smart-form">                            <header>                                Role                            </header>                            <fieldset>                                <section>                                    <select id="role" name="role" class="select2_single" style="width: 100%">                                        <option></option>                                        <option selected="selected" value="ADM">EMD ADMIN</option>                                    </select>                                </section>                                <section id="region_section" style="display:none">                                    <select id="region" name="region" class="select2_single" style="width: 100%">                                        <option></option>                                        <?php                                          foreach ($regions as $r)                                         {                                            ?>                                            <option value="<?php echo $r; ?>"><?php echo $r; ?></option>                                            <?php                                                                                  }                                        ?>                                    </select>                                </section>                                <section id="operator_section" style="display:none">                                    <select multiple="multiple" id="operator" name="operator" class="select2_single" style="width: 100%">                                        <?php                                        foreach ($operators as $key => $value)                                         {                                            ?>                                            <option value="<?php echo $key; ?>"><?php echo $value; ?></option>                                            <?php                                                                                  }                                        ?>                                    </select>                                </section>                                <section id="lc_section"></section>                            </fieldset>                            <header>                                User Informations                            </header>                            <fieldset>                                <section>                                    <label class="input"> <i class="icon-append fa fa-user"></i>                                        <input type="text" id="name" name="name" placeholder="Name">                                        <b class="tooltip tooltip-bottom-right">Enter name.</b>                                    </label>                                </section>                                <section>                                    <label class="input"> <i class="icon-append fa fa-envelope-o"></i>                                        <input type="email" id="email" name="email" placeholder="Email address">                                        <b class="tooltip tooltip-bottom-right">Enter email which will be used as username.</b>                                    </label>                                </section>                                <section>                                    <label class="input"> <i class="icon-append fa fa-lock"></i>                                        <input type="password" id="password" name="password" placeholder="Password"                                        id="password">                                        <b class="tooltip tooltip-bottom-right">Enter password.</b>                                    </label>                                </section>                                <section>                                    <label class="input"> <i class="icon-append fa fa-lock"></i>                                        <input type="password" id="re_password" name="re_password" placeholder="Confirm password">                                        <b class="tooltip tooltip-bottom-right">Re-enter password.</b>                                    </label>                                </section>                            </fieldset>                            <footer>                                <button id="submit_form" class="btn btn-primary">                                    Submit                                </button>                            </footer>                        </form>                    </div>                </div>            </div>        </article>    </div></div><?php $__env->stopSection(); ?><?php $__env->startSection('pr-css'); ?><?php $__env->stopSection(); ?><?php $__env->startSection('pr-scripts'); ?><script src="<?php echo URL::asset('js/plugin/jquery-validate/jquery.validate.min.js'); ?>"></script><?php $__env->stopSection(); ?><?php $__env->startSection('scripts'); ?><script type="text/javascript">    $( document ).ready(function() {        $('.modal_loading').hide();    });    $('#role').on('change', function(e)    {        $('#region').select2("val", "");        $('#lcs').select2("val", "");        $('#operator').select2("val", "");        if($(this).val()=="DL" || $(this).val()=="ASM")        {            $('#region_section').show("fast");            $('#operator_section').hide("fast");              if($(this).val()=="DL")            {                $('#lc_section').hide("fast");                $('#operator_section').hide("fast");              }        }        else if($(this).val()=="NO")        {            $('#region_section').hide("fast");              $('#lc_section').hide("fast");               $('#operator_section').show("fast");          }        else        {            $('#region_section').hide("fast");              $('#lc_section').hide("fast");               $('#operator_section').hide("fast");           }    });    $('#region').on('change', function(e)    {        if($('#role').val() == "ASM")        {            $.ajax({                type: 'POST',                url: '<?php echo URL::route('add-account-lcs'); ?>',                data: {                    'region': $(this).val()                },                success: function (msg)                 {                    $('#lc_section').show("fast").html(msg);                }            });        }    });    $("#submit_form").on("click", function (e) {        e.preventDefault();        if($("#role").val()==null || $("#role").val()=="")        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please select role.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($('#operator_section').is(':visible') && ($("#operator").val()==null || $("#operator").val()==""))        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please select operator.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($('#region_section').is(':visible') && ($("#region").val()==null || $("#region").val()==""))        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please select region.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($('#lc_section').is(':visible') && ($("#lcs").val()==null || $("#lcs").val()==""))        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please select leisure centre.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($("#name").val()=="")        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please enter name.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($("#email").val()=="")        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please enter email.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if(!validateEmail($("#email").val()))        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please enter a valid email address.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($("#password").val()=="")        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please enter password.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($("#re_password").val()=="")        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Please re-enter password.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        if($("#re_password").val()!=$("#password").val())        {            $.smallBox({                title : "Validation",                content : "<i class='fa fa-clock-o'></i> <i>Passwords do not match.</i>",                color : "#C46A69",                iconSmall : "fa fa-times fa-2x bounce animated",                timeout : 4000            });            return;        }        $.SmartMessageBox({            title: "<i class='fa fa fa-spinner fa-spin txt-color-green'></i> Confirmation!",            content: "Do you want to save your user information?",            buttons: '[No][Yes]'        },        function (ButtonPressed) {            if (ButtonPressed === "Yes") {                $.ajax({                    type: 'POST',                    url: '<?php echo URL::route('add-account'); ?>',                    data: {                        'name': $('#name').val(),                        'email': $('#email').val(),                        'password': $('#password').val(),                        'region': $('#region').val(),                        'operator': $('#operator').val(),                        'lcs': $('#lcs').val(),                        'role': $('#role').val(),                        'ajax_action': "save_user_information"                    },                    beforeSend: function (request) {                        return request.setRequestHeader("X-CSRF-Token", $("meta[name='token']").attr('content'));                    },                    success: function (msg) {                        if (msg.success != undefined) {                            $.each(msg.errors, function (index, error) {                                $.smallBox({                                    title: "Token Mismatch",                                    content: "<i class='fa fa-clock-o'></i> <i>Please refresh the page.</i>",                                    color: "#C46A69",                                    iconSmall: "fa fa-times fa-2x bounce animated",                                    timeout: 4000                                });                            });                        }                        else if(msg == "duplicate")                        {                            $.smallBox({                                title : "Validation",                                content : "<i class='fa fa-clock-o'></i> <i>This email is already in use.</i>",                                color : "#C46A69",                                iconSmall : "fa fa-times fa-2x bounce animated",                                timeout : 4000                            });                        }                         else                         {                            $.smallBox({                                title: "Success",                                content: "<i class='fa fa-clock-o'></i> <i>User information saved successfully.</i>",                                color: "#659265",                                iconSmall: "fa fa-check fa-2x bounce animated",                                timeout: 4000                            });                            $('#account_info_form')[0].reset();                            $("#role").select2("val", "");                            $("#operator").select2("val", "");                            $("#region").select2("val", "");                            $("#lcs").select2("val", "");                            $('#operator_section').hide("fast");                            $('#region_section').hide("fast");                            $('#lc_section').hide("fast");                           }                    }                });            }            if (ButtonPressed === "No") {                $.smallBox({                    title: "Cancelled",                    content: "<i class='fa fa-clock-o'></i> <i>Submmison cancelled.</i>",                    color: "#C46A69",                    iconSmall: "fa fa-times fa-2x bounce animated",                    timeout: 4000                });            }        });    });</script><?php $__env->stopSection(); ?>
<?php echo $__env->make('templates.default', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>